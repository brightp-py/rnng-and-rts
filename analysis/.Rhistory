word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_rnng <- read_tsv(here("data/ns-results.tsv"))
df_lstm <- read_tsv(here("data/naturalstories.output"))
df_ids <- read_tsv(here("data/ids.tsv"))
df_rts <- read_tsv(here("data/processed_RTs.tsv"))
df_rnng <- df_rnng %>%
rename(story = item,
word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_lstm <- df_lstm %>%
rename(story = item,
word_num = token_id,
surp = lstm)
df_rnng <- read_tsv(here("data/ns-results.tsv"))
df_lstm <- read_tsv(here("data/naturalstories.output"))
df_ids <- read_tsv(here("data/ids.tsv"))
df_rts <- read_tsv(here("data/processed_RTs.tsv"))
df_rnng <- read_tsv(here("data/ns-results.tsv"))
df_lstm <- read_tsv(here("data/naturalstories.output"))
df_ids <- read_tsv(here("data/ids.tsv"))
df_rts <- read_tsv(here("data/processed_RTs.tsv"))
df_rnng <- df_rnng %>%
rename(word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_lstm <- df_lstm %>%
rename(word_num = token_id,
surp = lstm)
df_rnng <- read_tsv(here("data/ns-results.tsv"))
df_lstm <- read_tsv(here("data/naturalstories.output"))
df_ids <- read_tsv(here("data/ids.tsv"))
df_rts <- read_tsv(here("data/processed_RTs.tsv"))
df_rnng <- df_rnng %>%
rename(word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_lstm <- df_lstm %>%
rename(word_num = token_id)
df_ids <- df_ids %>%
rename(story = TokenItem,
zone = TokenZone,
word_num = TreeWord,
sent = TreeInd,
word = Component)
# there are some missing from the RNNG surprisals - cutting those out
df_surp <- left_join(df_ids, df_rnng, by = c("sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate")) %>%
mutate(zone = if_else(story == 1, zone + 1, zone))
df_surp <- left_join(df_surp, df_lstm, by = c("Sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate")))
df_rnng <- df_rnng %>%
rename(word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_rnng <- read_tsv(here("data/ns-results.tsv"))
df_lstm <- read_tsv(here("data/naturalstories.output"))
df_ids <- read_tsv(here("data/ids.tsv"))
df_rts <- read_tsv(here("data/processed_RTs.tsv"))
df_rnng <- df_rnng %>%
rename(word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_lstm <- df_lstm %>%
rename(word_num = token_id)
df_ids <- df_ids %>%
rename(story = TokenItem,
zone = TokenZone,
word_num = TreeWord,
sent = TreeInd,
word = Component)
# there are some missing from the RNNG surprisals - cutting those out
df_surp <- left_join(df_ids, df_rnng, by = c("sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate")) %>%
mutate(zone = if_else(story == 1, zone + 1, zone))
df_surp <- left_join(df_surp, df_lstm, by = c("sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate")))
df_rnng <- read_tsv(here("data/ns-results.tsv"))
df_lstm <- read_tsv(here("data/naturalstories.output"))
df_ids <- read_tsv(here("data/ids.tsv"))
df_rts <- read_tsv(here("data/processed_RTs.tsv"))
df_rnng <- df_rnng %>%
rename(word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_lstm <- df_lstm %>%
rename(word_num = token_id)
df_ids <- df_ids %>%
rename(story = TokenItem,
zone = TokenZone,
word_num = TreeWord,
sent = TreeInd,
word = Component)
# there are some missing from the RNNG surprisals - cutting those out
df_surp <- left_join(df_ids, df_rnng, by = c("sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate")) %>%
mutate(zone = if_else(story == 1, zone + 1, zone))
df_surp <- left_join(df_surp, df_lstm, by = c("sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate"))
df_missing_rnng <- filter(df_surp, is.na(ind_surp))
df_surp <- filter(df_surp, !is.na(ind_surp))
df_surp <- df_surp %>%
group_by(story, zone, sent) %>%
summarize(
# add column showing words, word_nums, depths, indices that were combined
word_nums = str_c(word_num, collapse = "; "),
words = str_c(word, collapse = "_"),
indices = str_c(Index, collapse = "; "),
depths = str_c(depth, collapse = "; "),
ind_surp = sum(ind_surp),
brn_surp = sum(brn_surp),
lstm_surp = sum(surp)
total_words = n()
df_rnng <- read_tsv(here("data/ns-results.tsv"))
df_lstm <- read_tsv(here("data/naturalstories.output"))
df_ids <- read_tsv(here("data/ids.tsv"))
df_rts <- read_tsv(here("data/processed_RTs.tsv"))
df_rnng <- df_rnng %>%
rename(word_num = token_id,
ind_surp = ind,
brn_surp = brn)
df_lstm <- df_lstm %>%
rename(word_num = token_id,
lstm_surp = surp)
df_ids <- df_ids %>%
rename(story = TokenItem,
zone = TokenZone,
word_num = TreeWord,
sent = TreeInd,
word = Component)
# there are some missing from the RNNG surprisals - cutting those out
df_surp <- left_join(df_ids, df_rnng, by = c("sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate")) %>%
mutate(zone = if_else(story == 1, zone + 1, zone))
df_surp <- left_join(df_surp, df_lstm, by = c("sent", "word_num"), suffix = c("", ".duplicate")) %>%
select(-ends_with(".duplicate"))
df_missing_rnng <- filter(df_surp, is.na(ind_surp))
df_surp <- filter(df_surp, !is.na(ind_surp))
df_surp <- df_surp %>%
group_by(story, zone, sent) %>%
summarize(
# add column showing words, word_nums, depths, indices that were combined
word_nums = str_c(word_num, collapse = "; "),
words = str_c(word, collapse = "_"),
indices = str_c(Index, collapse = "; "),
depths = str_c(depth, collapse = "; "),
ind_surp = sum(ind_surp),
brn_surp = sum(brn_surp),
lstm_surp = sum(lstm_surp)
total_words = n()
df_surp <- df_surp %>%
group_by(story, zone, sent) %>%
summarize(
# add column showing words, word_nums, depths, indices that were combined
word_nums = str_c(word_num, collapse = "; "),
words = str_c(word, collapse = "_"),
indices = str_c(Index, collapse = "; "),
depths = str_c(depth, collapse = "; "),
ind_surp = sum(ind_surp),
brn_surp = sum(brn_surp),
lstm_surp = sum(lstm_surp),
total_words = n()
)
df_surp_zone_count <- df_surp %>%
group_by(story) %>%
count()
df_rts <- rename(df_rts, story = item)
df_rt_count <- df_rts %>%
group_by(story, zone) %>%
count()
df_zone_count <- df_rt_count %>%
group_by(story) %>%
count()
# this is a join just to check for items with RTs but without surprisals
df_missing_surp <- left_join(df_rt_count, df_surp, by = c("story", "zone")) %>%
filter(is.na(indices))
df_rtsurp <- left_join(df_rts, df_surp, by = c("story", "zone")) %>%
filter(!is.na(ind_surp)) %>%
arrange(story, zone)
df_words <- df_rtsurp %>%
group_by(story, zone, word) %>%
count()
df_rtsurp <- df_rtsurp %>%
mutate(story_zone  = str_c(story, zone, sep = "_"))
df_zonemeans <- df_rtsurp %>%
group_by(story_zone, ind_surp) %>%
summarize(
meanRT = mean(RT, na.rm = TRUE)
)
df_highmeans <- df_zonemeans %>%
filter(meanRT > 750)
p_rtsurp <- ggplot(
df_zonemeans,
aes(y = meanRT, x = lstm_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal")
p_rtsurp
df_zonemeans <- df_rtsurp %>%
group_by(story_zone, lstm_surp) %>%
summarize(
meanRT = mean(RT, na.rm = TRUE)
)
p_rtsurp <- ggplot(
df_zonemeans,
aes(y = meanRT, x = lstm_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal")
p_rtsurp
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = lstm_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)")
p_lower
m_1 <- lmer(log(RT) ~ ind_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(log(RT) ~ ind_surp + lstm_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ ind_surp + lstm_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ lstm_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ ind_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ lstm_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ brn_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ brn_surp + (1|WorkerId) + (1|depths), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ ind_surp + (1|WorkerId) + (1|depths), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(RT ~ ind_surp + depths + (1|WorkerId), data = df_rtsurp)
m_1 <- lmer(RT ~ ind_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(log(RT) ~ ind_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
m_1 <- lmer(log(RT) ~ lstm_surp + (1|WorkerId), data = df_rtsurp)
summary(m_1)
df_zonemeans <- df_rtsurp %>%
group_by(story_zone, ind_surp) %>%
summarize(
meanRT = mean(RT, na.rm = TRUE)
)
df_highmeans <- df_zonemeans %>%
filter(meanRT > 750)
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = lstm_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)")
p_lower
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)")
p_lower
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
pngfile <- here("imgs/rt_v_rnng.png")
agg_png(pngfile, width = 60, height = 30, units = "cm", res = 300)
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
imgfile <- here("imgs/rt_v_rnng.svg")
ggsave(file=imgfile, plot=p_lower, width=60, height=30)
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
imgfile <- here("imgs/rt_v_rnng.svg")
ggsave(file=imgfile, plot=p_lower, width=60, height=30, unit="cm")
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=60, height=30, unit="cm")
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=15, unit="cm")
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=10, unit="cm")
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
p_lower
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=12, unit="cm")
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=12, unit="cm")
p_lower
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("rnng_surp")
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=15, unit="cm")
p_lower
df_zonemeans <- df_rtsurp %>%
group_by(story_zone, lstm_surp) %>%
summarize(
meanRT = mean(RT, na.rm = TRUE)
)
df_highmeans <- df_zonemeans %>%
filter(meanRT > 750)
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = lstm_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("LSTM Surprisal")
imgfile <- here("imgs/rt_v_lstm.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=15, unit="cm")
p_lower
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = lstm_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("LSTM Surprisal") +
ylab("Mean Reading Time")
imgfile <- here("imgs/rt_v_lstm.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=15, unit="cm")
p_lower
df_zonemeans <- df_rtsurp %>%
group_by(story_zone, ind_surp) %>%
summarize(
meanRT = mean(RT, na.rm = TRUE)
)
df_highmeans <- df_zonemeans %>%
filter(meanRT > 750)
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("RNNG Surprisal") +
ylab("Mean Reading Time")
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=30, height=15, unit="cm")
p_lower
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("RNNG Surprisal") +
ylab("Mean Reading Time")
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=10, height=5, unit="cm")
p_lower
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = ind_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("RNNG Surprisal") +
ylab("Mean Reading Time")
imgfile <- here("imgs/rt_v_rnng.png")
ggsave(file=imgfile, plot=p_lower, width=20, height=10, unit="cm")
p_lower
df_zonemeans <- df_rtsurp %>%
group_by(story_zone, lstm_surp) %>%
summarize(
meanRT = mean(RT, na.rm = TRUE)
)
df_highmeans <- df_zonemeans %>%
filter(meanRT > 750)
p_lower <- ggplot(
filter(df_zonemeans, meanRT < 750),
aes(y = meanRT, x = lstm_surp)
) +
geom_point(
stat = "identity"
) +
geom_smooth(method = lm, level = 0.99) +
ggtitle("RT * surprisal (means under 750)") +
xlab("LSTM Surprisal") +
ylab("Mean Reading Time")
imgfile <- here("imgs/rt_v_lstm.png")
ggsave(file=imgfile, plot=p_lower, width=20, height=10, unit="cm")
p_lower
